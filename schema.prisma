// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          String    @id @default(cuid())
  name        String    @default("")
  email       String    @unique @default("")
  password    String
  matchesWon  Match[]   @relation("Match_winner")
  matchesLost Match[]   @relation("Match_loser")
  createdAt   DateTime? @default(now())
}

model Match {
  id          String    @id @default(cuid())
  date        DateTime? @default(now())
  game        Game?     @relation("Match_game", fields: [gameId], references: [id])
  gameId      String?   @map("game")
  winner      User?     @relation("Match_winner", fields: [winnerId], references: [id])
  winnerId    String?   @map("winner")
  winnerScore Int       @default(8)
  loser       User?     @relation("Match_loser", fields: [loserId], references: [id])
  loserId     String?   @map("loser")
  loserScore  Int

  @@index([gameId])
  @@index([winnerId])
  @@index([loserId])
}

model Game {
  id      String    @id @default(cuid())
  title   String    @default("")
  matches Match[]   @relation("Match_game")
  date    DateTime? @default(now())
}
